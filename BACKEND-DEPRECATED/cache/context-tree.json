{
    "metadata": {
        "description": "Dynamic State and Learning Context for Elite Code Assistant",
        "version": "1.0.0",
        "lastUpdated": "2024-03-20T00:00:00Z"
    },
    
    "currentState": {
        "activeContextTypes": ["code_search", "code_edit", "code_analysis", "code_completion", "memory_management"],
        "recentSuccess": true,
        "lastToolCall": {
            "tool": "CodeService.SemanticSearch",
            "timestamp": "2024-03-20T00:00:00Z",
            "performance": {
                "latency": 120,
                "memoryUsage": 45,
                "cpuUsage": 2.3
            }
        },
        "codeQualityMetrics": {
            "typeSafety": 0.98,
            "testCoverage": 0.95,
            "complexityScore": 0.85,
            "maintainability": 0.92
        }
    },

    "toolContexts": {
        "CodeService": {
            "methods": {
                "SemanticSearch": {
                    "requiredArgs": ["query"],
                    "optionalArgs": ["maxResults", "contextLines"],
                    "successPatterns": ["exact_match", "semantic_match"],
                    "usageStats": {
                        "totalCalls": 150,
                        "successRate": 0.97,
                        "avgLatency": 120
                    }
                },
                "EditCode": {
                    "requiredArgs": ["file", "startLine", "endLine", "newContent"],
                    "optionalArgs": ["backup", "validate"],
                    "successPatterns": ["syntax_valid", "type_safe"],
                    "usageStats": {
                        "totalCalls": 120,
                        "successRate": 0.92,
                        "avgLatency": 150
                    }
                },
                "AnalyzeCode": {
                    "requiredArgs": ["file", "startLine", "endLine"],
                    "optionalArgs": ["includeMetrics", "depth"],
                    "successPatterns": ["complete_analysis", "metrics_generated"],
                    "usageStats": {
                        "totalCalls": 200,
                        "successRate": 0.94,
                        "avgLatency": 180
                    }
                }
            },
            "serviceStats": {
                "totalCalls": 470,
                "uptime": 0.9999,
                "performance": {
                    "avgResponseTime": 150,
                    "errorRate": 0.02,
                    "memoryUsage": 45
                }
            }
        },
        "MemoryTool": {
            "methods": {
                "addEntry": {
                    "requiredArgs": ["type", "content"],
                    "optionalArgs": ["metadata", "tags"],
                    "successPatterns": ["stored", "indexed"],
                    "usageStats": {
                        "totalCalls": 100,
                        "successRate": 0.97,
                        "avgLatency": 50
                    }
                },
                "searchEntries": {
                    "requiredArgs": [],
                    "optionalArgs": ["type", "tags", "timeRange", "metadata"],
                    "successPatterns": ["found", "filtered"],
                    "usageStats": {
                        "totalCalls": 95,
                        "successRate": 0.96,
                        "avgLatency": 40
                    }
                },
                "updateEntry": {
                    "requiredArgs": ["id", "updates"],
                    "optionalArgs": [],
                    "successPatterns": ["updated", "validated"],
                    "usageStats": {
                        "totalCalls": 85,
                        "successRate": 0.94,
                        "avgLatency": 45
                    }
                }
            },
            "serviceStats": {
                "totalCalls": 280,
                "uptime": 1.0,
                "performance": {
                    "avgResponseTime": 45,
                    "errorRate": 0.01,
                    "memoryUsage": 25
                }
            }
        }
    },

    "typeBindings": {
        "code_search": {
            "validTools": ["CodeService.SemanticSearch", "CodeService.GrepSearch"],
            "commonArgs": ["query", "maxResults"],
            "validationRules": ["query_not_empty", "max_results_positive"]
        },
        "code_edit": {
            "validTools": ["CodeService.EditCode", "CodeService.OptimizeCode"],
            "commonArgs": ["file", "startLine", "endLine"],
            "validationRules": ["file_exists", "line_numbers_valid"]
        },
        "memory_management": {
            "validTools": ["MemoryTool.addEntry", "MemoryTool.searchEntries", "MemoryTool.updateEntry"],
            "commonArgs": ["type", "content"],
            "validationRules": ["type_valid", "content_not_empty"]
        }
    },

    "userContext": {
        "preferredPatterns": {
            "code_search": ["semantic", "exact"],
            "code_edit": ["safe", "validated"],
            "code_analysis": ["deep", "metrics"],
            "memory_management": ["efficient", "indexed"]
        },
        "commonArgs": {
            "maxResults": 10,
            "backup": true,
            "includeMetrics": true
        },
        "successRates": {
            "code_search": 0.97,
            "code_edit": 0.92,
            "code_analysis": 0.94,
            "memory_management": 0.96
        }
    },

    "learningContext": {
        "patternStrengthThreshold": 0.90,
        "minSuccessCount": 15,
        "recentLearnings": [
            {
                "pattern": "semantic_search_optimization",
                "impact": "30% faster response time",
                "confidence": 0.95
            },
            {
                "pattern": "memory_efficiency",
                "impact": "25% reduced memory usage",
                "confidence": 0.92
            }
        ],
        "performanceOptimizations": {
            "CodeService.SemanticSearch": {
                "improvement": "Cached embeddings",
                "impact": "30% faster response time",
                "confidence": 0.95
            },
            "CodeService.EditCode": {
                "improvement": "Parallel validation",
                "impact": "20% faster validation",
                "confidence": 0.90
            }
        }
    },

    "memoryStats": {
        "totalEntries": 280,
        "entryTypes": {
            "interaction": 150,
            "preference": 80,
            "learning": 30,
            "context": 20
        },
        "recentActivity": {
            "lastHour": 25,
            "lastDay": 150,
            "lastWeek": 280
        },
        "performance": {
            "avgQueryTime": 45,
            "cacheHitRate": 0.95,
            "memoryUsage": 25
        }
    }
} 