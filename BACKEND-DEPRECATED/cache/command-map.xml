<?xml version="1.0" encoding="UTF-8"?>
<CommandMap>
    <PatternGroup name="code_search">
        <Pattern id="SEARCH_CODE_1" confidence="0.95">
            <Triggers>
                <Trigger>find code that</Trigger>
                <Trigger>search for</Trigger>
                <Trigger>locate where</Trigger>
                <Trigger>show me the code that</Trigger>
            </Triggers>
            <Variables>
                <Variable name="query" type="string" required="true" />
                <Variable name="maxResults" type="number" required="false" default="10" />
            </Variables>
            <Tool>CodeService.SemanticSearch</Tool>
            <SuccessCount>150</SuccessCount>
            <FailureCount>5</FailureCount>
        </Pattern>
        <Pattern id="SEARCH_CODE_2" confidence="0.90">
            <Triggers>
                <Trigger>where is</Trigger>
                <Trigger>find where</Trigger>
                <Trigger>show me where</Trigger>
            </Triggers>
            <Variables>
                <Variable name="symbol" type="string" required="true" />
                <Variable name="caseSensitive" type="boolean" required="false" default="false" />
            </Variables>
            <Tool>CodeService.GrepSearch</Tool>
            <SuccessCount>80</SuccessCount>
            <FailureCount>8</FailureCount>
        </Pattern>
    </PatternGroup>

    <PatternGroup name="code_edit">
        <Pattern id="EDIT_CODE_1" confidence="0.95">
            <Triggers>
                <Trigger>update the code to</Trigger>
                <Trigger>change the code to</Trigger>
                <Trigger>modify the code to</Trigger>
                <Trigger>edit the code to</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="endLine" type="number" required="true" />
                <Variable name="newContent" type="string" required="true" />
                <Variable name="backup" type="boolean" required="false" default="true" />
            </Variables>
            <Tool>CodeService.EditCode</Tool>
            <SuccessCount>120</SuccessCount>
            <FailureCount>10</FailureCount>
        </Pattern>
        <Pattern id="EDIT_CODE_2" confidence="0.90">
            <Triggers>
                <Trigger>optimize this code</Trigger>
                <Trigger>improve performance of</Trigger>
                <Trigger>make this code faster</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="endLine" type="number" required="true" />
                <Variable name="optimizationLevel" type="string" required="false" default="balanced" />
            </Variables>
            <Tool>CodeService.OptimizeCode</Tool>
            <SuccessCount>45</SuccessCount>
            <FailureCount>7</FailureCount>
        </Pattern>
    </PatternGroup>

    <PatternGroup name="code_analysis">
        <Pattern id="ANALYZE_CODE_1" confidence="0.95">
            <Triggers>
                <Trigger>analyze this code</Trigger>
                <Trigger>explain how this works</Trigger>
                <Trigger>what does this code do</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="endLine" type="number" required="true" />
                <Variable name="includeMetrics" type="boolean" required="false" default="true" />
            </Variables>
            <Tool>CodeService.AnalyzeCode</Tool>
            <SuccessCount>200</SuccessCount>
            <FailureCount>12</FailureCount>
        </Pattern>
        <Pattern id="ANALYZE_CODE_2" confidence="0.90">
            <Triggers>
                <Trigger>find issues in</Trigger>
                <Trigger>check for problems in</Trigger>
                <Trigger>what's wrong with</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="endLine" type="number" required="true" />
                <Variable name="severity" type="string" required="false" default="all" />
            </Variables>
            <Tool>CodeService.FindIssues</Tool>
            <SuccessCount>90</SuccessCount>
            <FailureCount>9</FailureCount>
        </Pattern>
    </PatternGroup>

    <PatternGroup name="code_completion">
        <Pattern id="COMPLETE_CODE_1" confidence="0.95">
            <Triggers>
                <Trigger>complete this code</Trigger>
                <Trigger>finish this implementation</Trigger>
                <Trigger>suggest the rest of</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="context" type="string" required="false" />
                <Variable name="maxLines" type="number" required="false" default="50" />
            </Variables>
            <Tool>CodeService.CompleteCode</Tool>
            <SuccessCount>75</SuccessCount>
            <FailureCount>8</FailureCount>
        </Pattern>
        <Pattern id="COMPLETE_CODE_2" confidence="0.90">
            <Triggers>
                <Trigger>suggest improvements for</Trigger>
                <Trigger>how can I improve</Trigger>
                <Trigger>make this code better</Trigger>
            </Triggers>
            <Variables>
                <Variable name="file" type="string" required="true" />
                <Variable name="startLine" type="number" required="true" />
                <Variable name="endLine" type="number" required="true" />
                <Variable name="focus" type="string" required="false" default="all" />
            </Variables>
            <Tool>CodeService.SuggestImprovements</Tool>
            <SuccessCount>60</SuccessCount>
            <FailureCount>7</FailureCount>
        </Pattern>
    </PatternGroup>

    <PatternGroup name="memory_management">
        <Pattern id="MEMORY_STORE_1" confidence="0.95">
            <Triggers>
                <Trigger>remember this interaction</Trigger>
                <Trigger>store this pattern</Trigger>
                <Trigger>save this preference</Trigger>
            </Triggers>
            <Variables>
                <Variable name="type" type="string" required="true" />
                <Variable name="content" type="any" required="true" />
                <Variable name="metadata" type="object" required="false" />
                <Variable name="tags" type="array" required="false" />
            </Variables>
            <Tool>MemoryTool.addEntry</Tool>
            <SuccessCount>100</SuccessCount>
            <FailureCount>3</FailureCount>
        </Pattern>
        <Pattern id="MEMORY_RETRIEVE_1" confidence="0.95">
            <Triggers>
                <Trigger>recall similar interactions</Trigger>
                <Trigger>find previous patterns</Trigger>
                <Trigger>get stored preferences</Trigger>
            </Triggers>
            <Variables>
                <Variable name="type" type="string" required="false" />
                <Variable name="tags" type="array" required="false" />
                <Variable name="timeRange" type="object" required="false" />
                <Variable name="metadata" type="object" required="false" />
            </Variables>
            <Tool>MemoryTool.searchEntries</Tool>
            <SuccessCount>95</SuccessCount>
            <FailureCount>4</FailureCount>
        </Pattern>
        <Pattern id="MEMORY_UPDATE_1" confidence="0.90">
            <Triggers>
                <Trigger>update this memory</Trigger>
                <Trigger>modify stored pattern</Trigger>
                <Trigger>adjust this preference</Trigger>
            </Triggers>
            <Variables>
                <Variable name="id" type="string" required="true" />
                <Variable name="updates" type="object" required="true" />
            </Variables>
            <Tool>MemoryTool.updateEntry</Tool>
            <SuccessCount>85</SuccessCount>
            <FailureCount>5</FailureCount>
        </Pattern>
    </PatternGroup>

    <GlobalStats>
        <TotalPatterns>11</TotalPatterns>
        <HighConfidencePatterns>8</HighConfidencePatterns>
        <CacheHitRate>0.92</CacheHitRate>
        <AverageConfidence>0.93</AverageConfidence>
    </GlobalStats>
</CommandMap> 